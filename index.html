function generarTodo() {
    const componente = document.getElementById('comp').value;
    const valor = document.getElementById('val').value;
    const descripcion = document.getElementById('desc').value;

    if(!componente || !valor) {
        alert("Por favor escribe al menos el componente y el valor");
        return;
    }

    // 1. PRIMERO: Limpiar el QR anterior
    document.getElementById('qrcode').innerHTML = ""; 

    // 2. SEGUNDO: Mostrar la etiqueta (Importante que sea antes de generar el QR)
    const etiqueta = document.getElementById('etiqueta');
    etiqueta.style.display = 'inline-block';
    
    document.getElementById('txt-comp').innerText = componente.toUpperCase();
    document.getElementById('txt-val').innerText = "Valor: " + valor;
    document.getElementById('txt-desc').innerText = descripcion;

    // 3. TERCERO: Crear el QR
    const infoTotal = `COMPONENTE: ${componente}\nVALOR: ${valor}\nINFO: ${descripcion}`;
    
    new QRCode(document.getElementById("qrcode"), {
        text: infoTotal,
        width: 160,
        height: 160,
        correctLevel : QRCode.CorrectLevel.H // AÃ±adimos esto para mejor lectura
    });
}
